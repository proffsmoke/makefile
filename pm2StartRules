
````
# ðŸ“¦ Regra Ãºnica de padronizaÃ§Ã£o de inicializacao do projeto.

- Comandos globais: `yarn start | restart | build | build:restart | dev | logs | help`  
- Fluxo sempre: `clean â†’ install â†’ typecheck â†’ build â†’ (PM2 start/reload)`  
- Cada pacote deve ter: `dev`, `build`, `start`, `typecheck`  
- Sempre limpar: `.next dist build coverage`  
- PM2 definido em `ecosystem.config.js` com `namespace: "{{project-name}}-stack"`  
- README.md sÃ³ lista comandos  

---

## package.json (raiz)
```json
{
  "scripts": {
    "help": "node -e \"console.log('yarn start | restart | build | build:restart | dev | logs | help')\"",
    "clean": "yarn workspaces foreach -At exec sh -lc 'rm -rf .next dist build coverage'",
    "install": "yarn install --immutable",
    "typecheck:all": "yarn workspaces foreach -At run typecheck || echo 'skip'",
    "build:all": "yarn workspaces foreach -At run build",
    "build": "yarn run clean && yarn run install && yarn run typecheck:all && yarn run build:all",
    "pm2:up": "pm2 startOrReload ecosystem.config.js --env production",
    "pm2:reload": "pm2 reload {{project-name}}-stack --update-env || pm2 start ecosystem.config.js --env production",
    "pm2:logs": "pm2 logs {{project-name}}-stack --lines 200",
    "start": "yarn run build && yarn run pm2:up",
    "restart": "yarn run build && yarn run pm2:reload",
    "build:restart": "yarn run build && yarn run pm2:up",
    "dev": "yarn workspaces foreach -pt run dev",
    "logs": "yarn run pm2:logs"
  }
}
````

## ecosystem.config.js

```js
module.exports = {
  apps: [
    { name: '{{project-name}}-stack:backend',   namespace: '{{project-name}}-stack', script: 'apps/backend/dist/index.js',   instances: 1, exec_mode: 'cluster' },
    { name: '{{project-name}}-stack:frontend',  namespace: '{{project-name}}-stack', script: 'node_modules/next/dist/bin/next', args: 'start -p 3000', instances: 1 },
    { name: '{{project-name}}-stack:worker',    namespace: '{{project-name}}-stack', script: 'apps/worker/dist/worker.js',     instances: 1, exec_mode: 'cluster' }
  ]
};
```

## README.md

```
yarn start        â†’ clean+install+typecheck+build+PM2 start
yarn restart      â†’ clean+install+typecheck+build+PM2 reload
yarn build        â†’ clean+install+typecheck+build
yarn build:restartâ†’ build+PM2 start
yarn dev          â†’ dev em todos serviÃ§os
yarn logs         â†’ logs do PM2 ({{project-name}}-stack)
yarn help         â†’ lista comandos
```

---
ðŸ‘‰ basta substituir **`{{project-name}}`** pelo nome real do projeto.

